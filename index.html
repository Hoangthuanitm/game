<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Hi·ªáp Sƒ© Nh·∫≠t Ng·ªØ</title>
  <!-- Font Awesome CDN for monster icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <style>
    * {
      box-sizing: border-box;
    }
    body {
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(135deg, #f6d365 0%, #fda085 100%);
      margin: 0;
      padding: 20px;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    .container {
      max-width: 900px;
      width: 100%;
      margin: auto;
      padding: 30px;
      background: rgba(255, 255, 255, 0.95);
      border-radius: 20px;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
      backdrop-filter: unset;
    }
    h1 {
      text-align: center;
      color: #d6336c;
      font-size: 2.5em;
      margin-bottom: 20px;
      text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
      display: none;
    }
    h1.logged-in {
      display: block;
    }
    .profile {
      display: none;
      align-items: center;
      gap: 20px;
      background: #f9f9f9;
      padding: 20px;
      border-radius: 15px;
      margin-bottom: 30px;
      transition: transform 0.3s ease;
      flex-wrap: wrap;
    }
    .profile.logged-in {
      display: flex;
    }
    .profile:hover {
      transform: translateY(-5px);
    }
    .avatar {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      border: 3px solid #fff;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2em;
      color: white;
      position: relative;
    }
    .stats {
      flex: 1;
    }
    .stats p {
      margin: 8px 0;
      font-size: 1.1em;
      color: #333;
    }
    .progress-bar {
      width: 100%;
      background: #e0e0e0;
      border-radius: 12px;
      overflow: hidden;
      height: 25px;
      margin-top: 10px;
    }
    .progress-bar-fill {
      height: 100%;
      background: linear-gradient(90deg, #ff6b6b, #d6336c);
      width: 0%;
      transition: width 0.5s ease-in-out;
    }
    .profile-buttons {
      display: flex;
      gap: 10px;
      margin-top: 10px;
    }
    .progress-history {
      margin-top: 20px;
    }
    .progress-history h3 {
      color: #d6336c;
      margin-bottom: 15px;
      font-size: 1.2em;
    }
    .history-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.9em;
      color: #333;
      background: #fff;
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }
    .history-table th, .history-table td {
      padding: 12px;
      text-align: left;
      border-bottom: 1px solid #ddd;
    }
    .history-table th {
      background: #d6336c;
      color: white;
      font-weight: 600;
    }
    .history-table tr:nth-child(even) {
      background: #f9f9f9;
    }
    .history-table tr:hover {
      background: #f1f1f1;
      transform: scale(1.01);
      transition: all 0.2s ease;
    }
    .history-table .monster-icon {
      font-size: 1.2em;
      margin-right: 5px;
    }
    .history-table .score-progress {
      background: #e0e0e0;
      border-radius: 8px;
      height: 10px;
      width: 80px;
      display: inline-block;
      overflow: hidden;
    }
    .history-table .score-progress-fill {
      height: 100%;
      background: linear-gradient(90deg, #28a745, #20c997);
      transition: width 0.5s ease-in-out;
    }
    .quiz-section {
      display: none;
      margin-top: 40px;
      padding: 20px;
      background: #f9f9f9;
      border-radius: 15px;
    }
    .quiz-section.logged-in {
      display: block;
    }
    .quiz-section h2 {
      color: #d6336c;
      margin-bottom: 15px;
    }
    .question-section {
      margin-bottom: 20px;
    }
    .question {
      font-size: 1.3em;
      margin-bottom: 20px;
      color: #333;
      font-weight: 500;
    }
    .vietnamese {
      font-size: 1.1em;
      color: #555;
      margin-bottom: 10px;
    }
    .example {
      background: #f1f1f1;
      padding: 15px;
      border-radius: 10px;
      margin-bottom: 20px;
    }
    .image-placeholder {
      margin: 10px 0;
      text-align: center;
    }
    .image-placeholder img {
      max-width: 100%;
      height: auto;
      border-radius: 10px;
      max-height: 150px;
    }
    .options {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    .option {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .option input[type="radio"] {
      margin: 0;
    }
    .option label {
      font-size: 1.1em;
      color: #333;
      cursor: pointer;
    }
    .text-input {
      width: 100%;
      padding: 12px;
      margin: 8px 0 12px;
      border-radius: 10px;
      border: 1px solid #ddd;
      font-size: 1em;
      transition: border-color 0.3s ease;
    }
    .text-input:focus {
      outline: none;
      border-color: #d6336c;
      box-shadow: 0 0 5px rgba(214, 51, 108, 0.3);
    }
    .answer-feedback {
      margin-top: 10px;
      font-size: 1em;
      color: #d6336c;
    }
    .answers button {
      display: block;
      width: 100%;
      margin-bottom: 12px;
      padding: 12px;
      border: none;
      border-radius: 10px;
      background: #ff6b6b;
      color: white;
      font-size: 1.1em;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    .answers button:hover {
      background: #d6336c;
      transform: scale(1.02);
    }
    .quiz-navigation {
      display: flex;
      gap: 10px;
      margin-top: 20px;
      justify-content: center;
    }
    .quiz-navigation button {
      padding: 12px 20px;
      border: none;
      background: #ff6b6b;
      color: white;
      border-radius: 10px;
      font-size: 1em;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    .quiz-navigation button:hover {
      background: #d6336c;
      transform: translateY(-2px);
    }
    .quiz-navigation button:disabled {
      background: #ccc;
      cursor: not-allowed;
      transform: none;
    }
    .auth-section {
      margin-top: 40px;
      padding: 20px;
      background: #f9f9f9;
      border-radius: 15px;
    }
    .auth-section.logged-in {
      display: none;
    }
    .auth-section h2 {
      color: #d6336c;
      margin-bottom: 15px;
    }
    .profile-form {
      display: none;
      margin-top: 40px;
      padding: 20px;
      background: #f9f9f9;
      border-radius: 15px;
    }
    .profile-form.logged-in {
      display: block;
    }
    .profile-form h2 {
      color: #d6336c;
      margin-bottom: 15px;
    }
    input[type="text"], input[type="password"], input[type="email"] {
      width: 100%;
      padding: 12px;
      margin: 8px 0 12px;
      border-radius: 10px;
      border: 1px solid #ddd;
      font-size: 1em;
      transition: border-color 0.3s ease;
    }
    input:focus {
      outline: none;
      border-color: #d6336c;
      box-shadow: 0 0 5px rgba(214, 51, 108, 0.3);
    }
    button {
      padding: 12px 20px;
      border: none;
      background: #ff6b6b;
      color: white;
      border-radius: 10px;
      font-size: 1em;
      cursor: pointer;
      transition: all 0.3s ease;
      margin-right: 10px;
    }
    button:hover {
      background: #d6336c;
      transform: translateY(-2px);
    }
    .monster-section {
      display: none;
      margin-top: 40px;
      padding: 20px;
      background: #f9f9f9;
      border-radius: 15px;
    }
    .monster-section.active {
      display: block;
    }
    .monster-section h2 {
      color: #d6336c;
      margin-bottom: 15px;
    }
    .monster-list {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
      gap: 15px;
      justify-items: center;
    }
    .monster-list a {
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 10px;
      background: #ff6b6b;
      color: white;
      text-align: center;
      border-radius: 10px;
      text-decoration: none;
      font-size: 0.9em;
      transition: all 0.3s ease;
      width: 100px;
      height: 120px;
      justify-content: center;
    }
    .monster-list a:hover {
      background: #d6336c;
      transform: scale(1.05);
    }
    .monster-list a.boss {
      background: linear-gradient(45deg, #b5179e, #7209b7);
      box-shadow: 0 0 15px rgba(181, 23, 158, 0.5);
    }
    .monster-list a.boss:hover {
      background: linear-gradient(45deg, #7209b7, #3c096c);
      box-shadow: 0 0 20px rgba(181, 23, 158, 0.7);
      transform: scale(1.15);
    }
    .monster-list i {
      font-size: 2em;
      margin-bottom: 5px;
    }
    .monster-list span {
      font-size: 0.8em;
    }
    .monster-list .exp {
      font-size: 0.7em;
      margin-top: 5px;
    }
    .leaderboard {
      display: none;
      margin-top: 40px;
      padding: 20px;
      background: #f9f9f9;
      border-radius: 15px;
    }
    .leaderboard.active {
      display: block;
    }
    .leaderboard h2 {
      color: #d6336c;
      margin-bottom: 15px;
    }
    .leaderboard table {
      width: 100%;
      border-collapse: collapse;
      font-size: 1em;
    }
    .leaderboard th, .leaderboard td {
      border: 1px solid #ddd;
      padding: 12px;
      text-align: left;
      color: #333;
    }
    .leaderboard th {
      background: #d6336c;
      color: white;
    }
    .leaderboard tr:nth-child(even) {
      background: #f1f1f1;
    }
    .exp-notification {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      justify-content: center;
      align-items: center;
      z-index: 1000;
      animation: fadeIn 0.3s ease-in-out;
    }
    .exp-notification.active {
      display: flex;
    }
    .exp-notification-content {
      background: linear-gradient(135deg, #ffffff, #f9f9f9);
      padding: 30px;
      border-radius: 20px;
      max-width: 400px;
      width: 90%;
      text-align: center;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
      transform: scale(0.7);
      animation: zoomIn 0.3s ease-in-out forwards;
    }
    .exp-icon {
      font-size: 3em;
      margin-bottom: 20px;
      animation: shake 0.5s ease-in-out infinite alternate;
    }
    .exp-notification h2 {
      color: #d6336c;
      font-size: 1.8em;
      margin-bottom: 15px;
    }
    .exp-notification p {
      color: #333;
      font-size: 1.1em;
      margin-bottom: 10px;
    }
    .exp-details p {
      margin: 8px 0;
      font-size: 1em;
    }
    .exp-details span {
      color: #d6336c;
      font-weight: 600;
    }
    .exp-buttons {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin-top: 20px;
    }
    .exp-buttons button {
      padding: 12px 20px;
      border: none;
      background: #ff6b6b;
      color: white;
      border-radius: 10px;
      font-size: 1em;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    .exp-buttons button:hover {
      background: #d6336c;
      transform: translateY(-2px);
    }
    .exp-buttons .retry-button {
      background: #28a745;
    }
    .exp-buttons .retry-button:hover {
      background: #218838;
    }
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    @keyframes zoomIn {
      from { transform: scale(0.7); }
      to { transform: scale(1); }
    }
    @keyframes shake {
      from { transform: translateX(-5px); }
      to { transform: translateX(5px); }
    }
    @media (max-width: 600px) {
      .container {
        padding: 15px;
      }
      .profile {
        flex-direction: column;
        align-items: flex-start;
      }
      .avatar {
        width: 80px;
        height: 80px;
        font-size: 1.5em;
      }
      h1 {
        font-size: 2em;
      }
      .question {
        font-size: 1.1em;
      }
      .monster-list {
        grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
      }
      .monster-list a {
        width: 80px;
        height: 100px;
      }
      .monster-list i {
        font-size: 1.5em;
      }
      .monster-list span {
        font-size: 0.7em;
      }
      .monster-list .exp {
        font-size: 0.6em;
      }
      .image-placeholder img {
        max-height: 100px;
      }
      .history-table {
        font-size: 0.8em;
      }
      .history-table th, .history-table td {
        padding: 8px;
      }
      .history-table .score-progress {
        width: 60px;
      }
      .exp-notification-content {
        padding: 20px;
        width: 95%;
      }
      .exp-icon {
        font-size: 2.5em;
      }
      .exp-notification h2 {
        font-size: 1.5em;
      }
      .exp-details p {
        font-size: 0.9em;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Auth Section -->
    <div class="auth-section" id="authSection">
      <h2>üîê ƒêƒÉng nh·∫≠p / ƒêƒÉng k√Ω</h2>
      <label for="email">Email</label>
      <input type="email" id="email" placeholder="Email" aria-label="Email" required />
      <label for="password">M·∫≠t kh·∫©u</label>
      <input type="password" id="password" placeholder="M·∫≠t kh·∫©u" aria-label="M·∫≠t kh·∫©u" required />
      <button onclick="window.login()" aria-label="ƒêƒÉng nh·∫≠p">ƒêƒÉng nh·∫≠p</button>
      <button onclick="window.register()" aria-label="ƒêƒÉng k√Ω">ƒêƒÉng k√Ω</button>
    </div>

    <!-- Profile Form -->
    <div class="profile-form" id="profileForm">
      <h2>üìã Th√¥ng tin c√° nh√¢n</h2>
      <label for="fullName">H·ªç v√† T√™n</label>
      <input type="text" id="fullName" placeholder="H·ªç v√† T√™n" aria-label="H·ªç v√† T√™n" required />
      <label for="className">L·ªõp h·ªçc</label>
      <input type="text" id="className" placeholder="L·ªõp h·ªçc" aria-label="L·ªõp h·ªçc" required />
      <button onclick="window.submitProfile()" aria-label="X√°c nh·∫≠n th√¥ng tin c√° nh√¢n">X√°c nh·∫≠n</button>
    </div>

    <h1 id="mainTitle">üéå Hi·ªáp Sƒ© Nh·∫≠t Ng·ªØ üéÆ</h1>

    <!-- Profile -->
    <div class="profile" id="profileSection">
      <div class="avatar" id="avatar" aria-label="Avatar ng∆∞·ªùi ch∆°i"></div>
      <div class="stats">
        <p><strong>H·ªç v√† T√™n:</strong> <span id="fullNameDisplay">Ch∆∞a c·∫≠p nh·∫≠t</span></p>
        <p><strong>L·ªõp h·ªçc:</strong> <span id="classNameDisplay">Ch∆∞a c·∫≠p nh·∫≠t</span></p>
        <p><strong>C·∫•p b·∫≠c:</strong> <span id="rank">Ch∆∞a ƒëƒÉng nh·∫≠p</span></p>
        <p><strong>Level:</strong> <span id="level">1</span></p>
        <p><strong>EXP:</strong> <span id="exp">0</span></p>
        <div class="progress-bar">
          <div class="progress-bar-fill" id="expBar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
        </div>
        <div class="profile-buttons">
          <button onclick="window.showMonsterSection()" aria-label="Di·ªát qu√°i">Di·ªát qu√°i</button>
          <button onclick="window.showLeaderboard()" aria-label="Xem b·∫£ng x·∫øp h·∫°ng">B·∫£ng x·∫øp h·∫°ng</button>
          <button onclick="window.logout()" aria-label="ƒêƒÉng xu·∫•t">ƒêƒÉng xu·∫•t</button>
        </div>
        <div class="progress-history">
          <h3>L·ªãch s·ª≠ di·ªát qu√°i</h3>
          <table class="history-table" id="monsterHistory">
            <thead>
              <tr>
                <th>Qu√°i v·∫≠t</th>
                <th>C·∫•p</th>
                <th>ƒêi·ªÉm</th>
                <th>EXP</th>
                <th>Th·ªùi gian</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- Quiz Section -->
    <div class="quiz-section" id="quizSection">
      <h2>üìù B√†i t·∫≠p ti·∫øng Nh·∫≠t</h2>
      <div id="questionText"></div>
      <div class="quiz-navigation">
        <button onclick="window.submitQuiz()" aria-label="N·ªôp b√†i">N·ªôp b√†i</button>
      </div>
    </div>

    <!-- Monster Section -->
    <div class="monster-section" id="monsterSection">
      <h2>‚öîÔ∏è Di·ªát Qu√°i</h2>
      <div class="monster-list" id="monsterList"></div>
    </div>

    <!-- Leaderboard -->
    <div class="leaderboard" id="leaderboardSection">
      <h2>üèÜ B·∫£ng x·∫øp h·∫°ng</h2>
      <table>
        <thead>
          <tr>
            <th>H·∫°ng</th>
            <th>H·ªç v√† T√™n</th>
            <th>L·ªõp h·ªçc</th>
            <th>C·∫•p b·∫≠c</th>
            <th>Level</th>
            <th>EXP</th>
          </tr>
        </thead>
        <tbody id="leaderboard"></tbody>
      </table>
    </div>

    <!-- EXP Notification Modal -->
    <div class="exp-notification" id="expNotification" role="dialog" aria-labelledby="expNotificationTitle" aria-hidden="true">
      <div class="exp-notification-content">
        <div class="exp-icon" id="expIcon"></div>
        <h2 id="expNotificationTitle">K·∫øt qu·∫£ chi·∫øn ƒë·∫•u</h2>
        <p id="expMessage"></p>
        <div class="exp-details">
          <p><strong>Qu√°i v·∫≠t:</strong> <span id="expMonster"></span></p>
          <p><strong>ƒêi·ªÉm s·ªë:</strong> <span id="expScore"></span></p>
          <p id="expAmountContainer"><strong>EXP nh·∫≠n ƒë∆∞·ª£c:</strong> <span id="expAmount"></span></p>
        </div>
        <div class="exp-buttons" id="expButtons"></div>
      </div>
    </div>
  </div>

  <!-- Main Script -->
  <script>
    // Rank definitions
    const ranks = [
      { name: 'T√¢n Binh', emoji: 'üõ°Ô∏è', minLevel: 1, gradient: 'linear-gradient(45deg, #a8dadc, #457b9d)' },
      { name: 'L√≠nh M·ªõi', emoji: 'ü™ñ', minLevel: 2, gradient: 'linear-gradient(45deg, #f1faee, #457b9d)' },
      { name: 'Ng∆∞·ªùi H·ªçc Vi·ªác', emoji: 'üìò', minLevel: 5, gradient: 'linear-gradient(45deg, #e9c46a, #f4a261)' },
      { name: 'Th∆∞ Sinh', emoji: 'üéì', minLevel: 10, gradient: 'linear-gradient(45deg, #e76f51, #f4a261)' },
      { name: 'H·ªçc Gi·∫£', emoji: 'üìö', minLevel: 15, gradient: 'linear-gradient(45deg, #2a9d8f, #264653)' },
      { name: 'T·∫≠p S·ª± Ki·∫øm Sƒ©', emoji: '‚öîÔ∏è', minLevel: 20, gradient: 'linear-gradient(45deg, #e63946, #d00000)' },
      { name: 'Hi·ªáp Sƒ©', emoji: 'üõ°Ô∏è‚öîÔ∏è', minLevel: 25, gradient: 'linear-gradient(45deg, #a8dadc, #1d3557)' },
      { name: 'Chi·∫øn Binh', emoji: 'üß±', minLevel: 30, gradient: 'linear-gradient(45deg, #606c38, #283618)' },
      { name: 'V√µ Sƒ© ƒê·∫°o', emoji: 'ü•∑', minLevel: 35, gradient: 'linear-gradient(45deg, #7209b7, #3c096c)' },
      { name: 'Th√°ch ƒê·∫•u', emoji: 'ü•á', minLevel: 40, gradient: 'linear-gradient(45deg, #ffd60a, #ffc107)' },
      { name: 'K·ª≥ T√†i', emoji: 'üåü', minLevel: 50, gradient: 'linear-gradient(45deg, #ff70a6, #ff006e)' },
      { name: 'Ki·∫øm Th√°nh', emoji: 'üî•üó°Ô∏è', minLevel: 60, gradient: 'linear-gradient(45deg, #ef233c, #d00000)' },
      { name: 'Truy·ªÅn Thuy·∫øt', emoji: 'üêâ', minLevel: 70, gradient: 'linear-gradient(45deg, #006d77, #023e8a)' }
    ];

    // Monster definitions with updated icons
    const monsters = [
      { level: 1, name: 'S√≥i L·ª≠a', icon: 'fa-wolf-pack-battalion', exp: 20, isBoss: false },
      { level: 2, name: 'M√®o Qu·ª∑', icon: 'fa-cat', exp: 25, isBoss: false },
      { level: 3, name: 'R·∫Øn ƒê·ªôc', icon: 'fa-snake', exp: 30, isBoss: false },
      { level: 4, name: 'Chim S√©t', icon: 'fa-crow', exp: 35, isBoss: false },
      { level: 5, name: 'H√† M√£ L·ª≠a', icon: 'fa-hippo', exp: 40, isBoss: false },
      { level: 6, name: 'G·∫•u BƒÉng', icon: 'fa-bear', exp: 45, isBoss: false },
      { level: 7, name: 'C√°o Huy·ªÅn', icon: 'fa-fox', exp: 50, isBoss: false },
      { level: 8, name: 'H∆∞∆°u Sao', icon: 'fa-deer', exp: 55, isBoss: false },
      { level: 9, name: 'Ng·ª±a Gi√≥', icon: 'fa-horse', exp: 60, isBoss: false },
      { level: 10, name: 'H·∫Øc Long B√≠ ·∫®n', icon: 'fa-dragon', exp: 80, isBoss: true },
      { level: 11, name: 'B·∫°ch H·ªï', icon: 'fa-tiger', exp: 70, isBoss: false },
      { level: 12, name: 'Qu·∫° B√≥ng T·ªëi', icon: 'fa-crow', exp: 75, isBoss: false },
      { level: 13, name: 'C√∫ S·∫•m', icon: 'fa-owl', exp: 80, isBoss: false },
      { level: 14, name: 'R√πa L·ª≠a', icon: 'fa-turtle', exp: 85, isBoss: false },
      { level: 15, name: 'S∆∞ T·ª≠ V√†ng', icon: 'fa-lion', exp: 90, isBoss: false },
      { level: 16, name: 'C√≤ Ma', icon: 'fa-dove', exp: 95, isBoss: false },
      { level: 17, name: 'B√≤ C·∫°p ƒê·ªôc', icon: 'fa-scorpion', exp: 100, isBoss: false },
      { level: 18, name: 'Ch√≥ SƒÉn B√≥ng', icon: 'fa-dog', exp: 105, isBoss: false },
      { level: 19, name: 'ƒê·∫°i B√†ng S√©t', icon: 'fa-eagle', exp: 110, isBoss: false },
      { level: 20, name: 'Qu·ª∑ V∆∞∆°ng H·ªèa Ng·ª•c', icon: 'fa-skull-crossbones', exp: 130, isBoss: true },
      { level: 21, name: 'R·ªìng Bi·ªÉn', icon: 'fa-fish-fins', exp: 120, isBoss: false },
      { level: 22, name: 'K·ª≥ L√¢n L·ª≠a', icon: 'fa-unicorn', exp: 125, isBoss: false },
      { level: 23, name: 'Ph∆∞·ª£ng Ho√†ng BƒÉng', icon: 'fa-phoenix', exp: 130, isBoss: false },
      { level: 24, name: 'H·∫Øc ∆Øng', icon: 'fa-hawk', exp: 135, isBoss: false },
      { level: 25, name: 'H·ªï R·ª´ng', icon: 'fa-paw', exp: 140, isBoss: false },
      { level: 26, name: 'S√≥i B√£o', icon: 'fa-wind', exp: 145, isBoss: false },
      { level: 27, name: 'R·∫Øn Bi·ªÉn', icon: 'fa-water', exp: 150, isBoss: false },
      { level: 28, name: 'Chim L·ª≠a', icon: 'fa-fire', exp: 155, isBoss: false },
      { level: 29, name: 'G·∫•u S·∫•m', icon: 'fa-bolt', exp: 160, isBoss: false },
      { level: 30, name: 'T·ª≠ Long Huy·ªÅn B√≠', icon: 'fa-dragon', exp: 180, isBoss: true },
      { level: 31, name: 'C√°o L·ª≠a', icon: 'fa-fire-flame-curved', exp: 170, isBoss: false },
      { level: 32, name: 'H∆∞∆°u BƒÉng', icon: 'fa-snowflake', exp: 175, isBoss: false },
      { level: 33, name: 'Ng·ª±a S·∫•m', icon: 'fa-cloud-bolt', exp: 180, isBoss: false },
      { level: 34, name: 'S∆∞ T·ª≠ B√£o', icon: 'fa-cloud-showers-heavy', exp: 185, isBoss: false },
      { level: 35, name: 'V∆∞∆°ng Long V√¥ ·∫¢nh', icon: 'fa-dragon', exp: 220, isBoss: true }
    ];

    // Sample questions for each level
    const questions = [
      // Level 1: S√≥i L·ª≠a
      {
        level: 1,
        exp: 20,
        questions: [
          // ÂïèÈ°åI
          { id: 'q1-rei', type: 'radio', question: '„Çå„ÅÑÔºâ', image: 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ-YAvLxURrkPteMKMOy56XXwJVG9965lD9Nw&s', answers: ['„Éé„Éº„Éà', '„Å§„Åè„Åà', '„Åª„Çì'], correct: '„Å§„Åè„Åà', points: 0 },
          { id: 'q1', type: 'radio', question: 'Ôºë', image: 'https://illustimage.com/photo/10801.png', answers: ['„Åë„Åó„Ç¥„É†', '„Åà„Çì„Å¥„Å§', '„Éö„É≥'], correct: '„Åà„Çì„Å¥„Å§', points: 2 },
          { id: 'q2', type: 'radio', question: 'Ôºí', image: 'https://frame-illust.com/fi/wp-content/uploads/2017/05/clock-03.png', answers: ['„Å®„Åë„ÅÑ', '„Åß„Çì„Çè', '„Åã„Å∞„Çì'], correct: '„Å®„Åë„ÅÑ', points: 2 },
          { id: 'q3', type: 'radio', question: 'Ôºì', image: 'https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEj8xP2FGiCtrON7YRbPZJ6fl5dH3IL4fKipjy1SV36iZ1-V2eOBcF2-fAc-fFfS9hy2l3BIhPPRX4vLbiRmYt0VcPwl-mWzNeWYkj3ZmlkvGEa_GoZqRv8sUJVu5HkojUZcyslTwHV-nV9J/s800/scool_room_kyoushitsu.png', answers: ['„Åç„Çá„ÅÜ„Åó„Å§', '„Å®„Åó„Çá„Åã„Çì', '„Å∏„ÇÑ'], correct: '„Åç„Çá„ÅÜ„Åó„Å§', points: 2 },
          // ÂïèÈ°åII
          { id: 'q4', type: 'radio', question: 'ÔºîÔºéÔºëÔºöÔºìÔºê', answers: ['„ÅÑ„Å°„Åò „Åï„Çì„Åò„ÇÖ„Å£„Å∂„Çì', '„ÅÑ„Å°„Åò „Åï„Çì„Åò„Å£„Å∂„Çì', '„ÅÑ„Å°„Åò„ÅØ„Çì'], correct: '„ÅÑ„Å°„Åò„ÅØ„Çì', points: 2 },
          { id: 'q5', type: 'radio', question: 'ÔºïÔºéÔºòÔºöÔºîÔºï', answers: ['„ÅØ„Å°„Åò „Çà„Çì„Åò„ÇÖ„ÅÜ„Åî„Åµ„Çì', '„ÅØ„Å°„Åò „Çà„Åò„ÇÖ„ÅÜ„Åî„Åµ„Çì', '„Åè„Åò „Çà„Çì„Åò„ÇÖ„Å£„Å∑„Çì'], correct: '„ÅØ„Å°„Åò „Çà„Çì„Åò„ÇÖ„ÅÜ„Åî„Åµ„Çì', points: 2 },
          { id: 'q6', type: 'radio', question: 'ÔºñÔºéÔºíÔºèÔºëÔºï', answers: ['„Å´„Åå„Å§ „Åò„ÇÖ„ÅÜ„Åî„Å´„Å°', '„Åµ„Å§„Åã „Åò„ÇÖ„ÅÜ„Åî„Å´„Å°', '„Å´„Åå„Å§ „Åò„ÇÖ„Åî„Å´„Å°'], correct: '„Å´„Åå„Å§ „Åò„ÇÖ„ÅÜ„Åî„Å´„Å°', points: 2 },
          { id: 'q7', type: 'radio', question: 'ÔºóÔºéTh·ª© Ôºì tu·∫ßn sau', answers: ['„Çâ„ÅÑ„Åó„ÇÖ„ÅÜ „ÅÆ„Åã„Çà„ÅÜ„Å≥', '„Åõ„Çì„Åó„ÇÖ„ÅÜ „ÅÆ„Åã„Çà„ÅÜ„Å≥', '„Åì„Çì„Åó„ÇÖ„ÅÜ „ÅÆ„Åã„Çà„ÅÜ„Å≥'], correct: '„Çâ„ÅÑ„Åó„ÇÖ„ÅÜ „ÅÆ„Åã„Çà„ÅÜ„Å≥', points: 2 },
          { id: 'q8', type: 'radio', question: 'ÔºòÔºéÔºêÔºòÔºêÔºçÔºëÔºíÔºìÔºîÔºçÔºïÔºñÔºóÔºò', answers: ['„Çº„É≠„ÅØ„Å°„Çº„É≠ „ÅÑ„Å°„Å´„Åï„Çì„Çà„Çì „Åî„Çç„Åè„Å™„Å™„ÅØ„Å°', '„Çå„ÅÑ„ÅØ„Å°„Çå„ÅÑ „ÅÑ„Å°„Å´„Åï„Çì„Çà„Çì „Åî„Çç„Åè„Å™„Å™„ÅØ„Å°', '„Åæ„Çã„ÅØ„Å°„Åæ„Çã „ÅÑ„Å°„Å´„Åï„Çì„Çà„Çì „Åî„Çç„Åè„Å™„Å™„ÅØ„Å°'], correct: '„Çº„É≠„ÅØ„Å°„Çº„É≠ „ÅÑ„Å°„Å´„Åï„Çì„Çà„Çì „Åî„Çç„Åè„Å™„Å™„ÅØ„Å°', points: 2 },
          // ÂïèÈ°åIII
          { id: 'q3-rei', type: 'radio', question: '„Çå„ÅÑÔºâ„ÅÑ„Å° „ÉºÔºà„ÄÄ„ÄÄ„ÄÄÔºâ„Éº „Åï„Çì', answers: ['„Çà„Çì', '„Å´', '„Åî'], correct: '„Å´', points: 0 },
          { id: 'q9', type: 'radio', question: 'ÔºôÔºé„Åí„Å§„Çà„ÅÜ„Å≥ „ÉºÔºà„ÄÄ„ÄÄ„ÄÄÔºâ„Éº „Åô„ÅÑ„Çà„ÅÜ„Å≥', answers: ['„ÇÇ„Åè„Çà„ÅÜ„Å≥', '„Åã„Çà„ÅÜ„Å≥', '„Å©„Çà„ÅÜ„Å≥'], correct: '„Åã„Çà„ÅÜ„Å≥', points: 2 },
          { id: 'q10', type: 'radio', question: 'ÔºëÔºêÔºé„Å§„ÅÑ„Åü„Å° „ÉºÔºà„ÄÄ„ÄÄ„ÄÄÔºâ„Éº „Åø„Å£„Åã', answers: ['„Åµ„Å§„Åã', '„ÅÑ„Å§„Åã', '„ÇÄ„ÅÑ„Åã'], correct: '„Åµ„Å§„Åã', points: 2 },
          { id: 'q11', type: 'radio', question: 'ÔºëÔºëÔºéÔºà„ÄÄ„ÄÄ„ÄÄÔºâ„Éº „Åç„ÅÆ„ÅÜ „Éº „Åç„Çá„ÅÜ', answers: ['„Åä„Å®„Å®„ÅÑ', '„ÅÇ„Åó„Åü', '„ÅÇ„Åï„Å£„Å¶'], correct: '„Åä„Å®„Å®„ÅÑ', points: 2 },
          { id: 'q12', type: 'radio', question: 'ÔºëÔºíÔºé„ÅÑ„Å° „Éº „Å´ „Éº Ôºà„ÄÄ„ÄÄ„ÄÄÔºâ „Éº „Çà„Çì', answers: ['„Çç„Åè', '„Åï„Çì', '„Åî'], correct: '„Åï„Çì', points: 2 },
          { id: 'q13', type: 'radio', question: 'ÔºëÔºìÔºé„Åõ„Çì „Éº Ôºà„ÄÄ„ÄÄ„ÄÄÔºâ„Éº „Åï„Çì„Åú„Çì', answers: ['„Å´„Åõ„Çì', '„Çà„Çì„Åõ„Çì', '„Åî„Åõ„Çì'], correct: '„Å´„Åõ„Çì', points: 2 },
          // ÂïèÈ°åIV
          { id: 'q4-rei', type: 'radio', question: '„Çå„ÅÑÔºâ„Çè„Åü„ÅóÔºà„ÄÄ„ÄÄ„ÄÄÔºâ„Åå„Åè„Åõ„ÅÑ„Åß„Åô„ÄÇ', answers: ['„Åå', '„Çí', '„ÅØ'], correct: '„ÅØ', points: 0 },
          { id: 'q14', type: 'radio', question: 'ÔºëÔºîÔºé„Åì„ÇåÔºà„ÄÄ„ÄÄ„ÄÄÔºâ„Åª„Çì„Åß„Åô„ÄÇ', answers: ['„ÅØ', '„Åå', '„Çí'], correct: '„ÅØ', points: 2 },
          { id: 'q15', type: 'radio', question: 'ÔºëÔºïÔºé„Åì„ÅìÔºà„ÄÄ„ÄÄ„ÄÄÔºâITM„Çª„É≥„Çø„Éº„Åß„Åô„ÄÇ', answers: ['„ÅØ', '„Åå', '„Çí'], correct: '„ÅØ', points: 2 },
          // ÂïèÈ°åV
          { id: 'q5-rei', type: 'text', question: '„Çå„ÅÑÔºâ„Åì„Çå„ÅØÔºà„Çè„Åü„ÅóÔºè„Åª„ÇìÔºè„ÅÆÔºâ„Åß„Åô„ÄÇ', correct: '„Åì„Çå„ÅØ „Çè„Åü„Åó„ÅÆ „Åª„Çì„Åß„Åô', points: 0 },
          { id: 'q28', type: 'text', question: 'ÔºíÔºòÔºé(„Åª„ÇìÔºè„Çè„Åü„ÅóÔºè„ÅÆÔºè„Åì„ÇåÔºè„ÅØÔºâ„Åß„Åô„ÄÇ', correct: '„Åì„Çå„ÅØ „Çè„Åü„Åó„ÅÆ „Åª„Çì„Åß„Åô', points: 4 },
          { id: 'q29', type: 'text', question: 'ÔºíÔºôÔºé(„Åõ„Çì„Åõ„ÅÑÔºè„Å¶„Å°„Çá„ÅÜÔºè„ÅÆÔºè„Åß„Åô„ÅãÔºè„Åì„ÇåÔºè„ÅØÔºâ„ÄÇ', correct: '„Åì„Çå„ÅØ „Åõ„Çì„Åõ„ÅÑ„ÅÆ „Å¶„Å°„Çá„ÅÜ„Åß„Åô„Åã', points: 4 },
          { id: 'q30', type: 'text', question: 'ÔºìÔºêÔºé(„Åò„Åó„ÇáÔºè„ÅÇ„ÇåÔºè„Åò„ÇÉ„ÅÇ„Çä„Åæ„Åõ„ÇìÔºè„ÅØÔºâ„ÄÇ', correct: '„ÅÇ„Çå„ÅØ „Åò„Åó„Çá„Åò„ÇÉ„ÅÇ„Çä„Åæ„Åõ„Çì', points: 4 },
          { id: 'q31', type: 'text', question: 'ÔºìÔºëÔºé(„ÅÑ„ÅæÔºè„Å™„Çì„ÅòÔºè„Åß„Åô„ÅãÔºâ„ÄÇ', correct: '„ÅÑ„Åæ „Å™„Çì„Åò„Åß„Åô„Åã', points: 4 },
          // ÂïèÈ°åVI
          { id: 'q32', type: 'radio', question: 'ÔºìÔºíÔºéAÔºö„Åä„ÅØ„Çà„ÅÜ„Åî„Åñ„ÅÑ„Åæ„Åô„ÄÇBÔºö„Åä„ÅØ„Çà„ÅÜ„Åî„Åñ„ÅÑ„Åæ„Åô„ÄÇAÔºöÔºà„ÄÄ„ÄÄ„ÄÄÔºâ„ÅØ„Éü„É≥„Åï„Çì„Åß„Åô„Åã„ÄÇ', answers: ['„ÅÇ„Å™„Åü', '„Çè„Åü„Åó', '„ÅÇ„ÅÆ„Å≤„Å®'], correct: '„ÅÇ„Å™„Åü', points: 3 },
          { id: 'q33', type: 'radio', question: 'ÔºìÔºìÔºéBÔºö„ÅØ„ÅÑ„ÄÅ„Çè„Åü„ÅóÔºà„ÄÄ„ÄÄ„ÄÄÔºâ„Éü„É≥„Åß„Åô„ÄÇ', answers: ['„ÅØ', '„Åå', '„Çí'], correct: '„ÅØ', points: 3 },
          { id: 'q34', type: 'radio', question: 'ÔºìÔºîÔºéBÔºöÔºà„ÄÄ„ÄÄ„ÄÄÔºâ„Çà„Çç„Åó„Åè„Åä„Å≠„Åå„ÅÑ„Åó„Åæ„Åô„ÄÇ', answers: ['„ÅØ„ÅÑ', '„Å©„ÅÜ„Åû', '„Åì„Å°„Çâ„Åì„Åù'], correct: '„Åì„Å°„Çâ„Åì„Åù', points: 3 },
          { id: 'q35', type: 'radio', question: 'ÔºìÔºïÔºéAÔºö„Éü„É≥„Åï„ÇìÔºà„ÄÄ„ÄÄ„ÄÄÔºâ„Éô„Éà„Éä„É†„Åò„Çì„Åß„Åô„Åã„ÄÇ', answers: ['„ÅØ', '„ÇÇ', '„Åå'], correct: '„ÅØ', points: 3 },
          { id: 'q36', type: 'radio', question: 'ÔºìÔºñÔºéBÔºö„ÅØ„ÅÑ„ÄÅ„Éô„Éà„Éä„É†„Åò„Çì„Åß„Åô„ÄÇÂ±±Áî∞„Åï„Çì„ÅØÔºà„ÄÄ„ÄÄ„ÄÄÔºâ„Åß„Åô„Åã„ÄÇ', answers: ['„Å©„Å™„Åü', '„Å™„Å´„Åò„Çì', '„Å™„Çì'], correct: '„Å™„Å´„Åò„Çì', points: 3 },
          // ÂïèÈ°åVII
          { id: 'q7-rei', type: 'radio', question: '„Çå„ÅÑÔºâX: „Åä„ÅØ„Çà„ÅÜ„Åî„Åñ„ÅÑ„Åæ„Åô', answers: ['„Åì„Çì„Å´„Å°„ÅØ', '„Åä„ÅØ„Çà„ÅÜ„Åî„Åñ„ÅÑ„Åæ„Åô', '„Åì„Çì„Å∞„Çì„ÅØ'], correct: '„Åä„ÅØ„Çà„ÅÜ„Åî„Åñ„ÅÑ„Åæ„Åô', points: 0 },
          { id: 'q37', type: 'radio', question: 'ÔºìÔºóÔºéX: „ÅØ„Åò„ÇÅ„Åæ„Åó„Å¶„ÄÇ„Çè„Åü„Åó„ÅØ„Çø„É≥„Åß„Åô„ÄÇ', answers: ['„Å©„ÅÜ„ÇÇ„ÅÇ„Çä„Åå„Å®„ÅÜ„Åî„Åñ„ÅÑ„Åæ„Åô„ÄÇ', '„ÅØ„Åò„ÇÅ„Åæ„Åó„Å¶„ÄÇ„Çè„Åü„Åó„ÅØ„É™„É≥„Åß„Åô„ÄÇ', '„Åï„Çà„ÅÜ„Å™„Çâ„ÄÇ'], correct: '„ÅØ„Åò„ÇÅ„Åæ„Åó„Å¶„ÄÇ„Çè„Åü„Åó„ÅØ„É™„É≥„Åß„Åô„ÄÇ', points: 3 },
          { id: 'q38', type: 'radio', question: 'ÔºìÔºòÔºéX: „Åì„Çå„ÅØ „Å™„Çì„Åß„Åô„Åã„ÄÇ', answers: ['„Åù„Çå„ÅØ „Åª„Çì„Åß„Åô„ÄÇ', '„Åì„Çå„ÅØ„Éü„É©„Éº„Åï„Çì„Åß„Åô„ÄÇ', '„Åì„Åì„ÅØ„Åç„Çá„ÅÜ„Åó„Å§„Åß„Åô„ÄÇ'], correct: '„Åù„Çå„ÅØ „Åª„Çì„Åß„Åô„ÄÇ', points: 3 },
          { id: 'q39', type: 'radio', question: 'ÔºìÔºôÔºéX: „ÅÑ„Åæ „Å™„Çì„Åò„Åß„Åô„Åã„ÄÇ', answers: ['„Åò„ÇÖ„ÅÜ„Åò„ÅØ„Çì„Åß„Åô„ÄÇ', '„Åò„ÇÖ„ÅÜ„Å´„Åå„Å§„Åß„Åô„ÄÇ', '„Å©„Çà„ÅÜ„Å≥„Åß„Åô„ÄÇ'], correct: '„Åò„ÇÖ„ÅÜ„Åò„ÅØ„Çì„Åß„Åô„ÄÇ', points: 3 },
          { id: 'q40', type: 'radio', question: 'ÔºîÔºêÔºéX: „Åì„ÅÆ „Åã„Å∞„Çì„ÅØ „Å†„Çå„ÅÆ„Åß„Åô„Åã„ÄÇ', answers: ['„Çè„Åü„Åó„ÅÆ„Åß„Åô„ÄÇ', '„Çè„Åü„Åó„Åß„Åô„ÄÇ', '„Å†„Çå„Åß„Åô„ÄÇ'], correct: '„Çè„Åü„Åó„ÅÆ„Åß„Åô„ÄÇ', points: 3 },
          { id: 'q41', type: 'radio', question: 'ÔºîÔºëÔºéX: „ÅÇ„ÅÆ„Åã„Åü„ÅØ „Å©„Å™„Åü„Åß„Åô„Åã„ÄÇ', answers: ['„Çè„Åü„Åó„ÅÆ „Åõ„Çì„Åõ„ÅÑ„Åß„Åô„ÄÇ', '„Çè„Åü„Åó„ÅØ „Åå„Åè„Åõ„ÅÑ„Åß„Åô„ÄÇ', '„ÅÇ„ÅÆ„Å≤„Å®„ÅØ „Å´„Åª„Çì„Åò„Çì„Åß„Åô„ÄÇ'], correct: '„Çè„Åü„Åó„ÅÆ „Åõ„Çì„Åõ„ÅÑ„Åß„Åô„ÄÇ', points: 3 }
        ]
      },
      // Levels 2 to 35
      ...Array.from({ length: 34 }, (_, i) => ({
        level: i + 2,
        exp: monsters[i + 1].exp,
        questions: [
          { question: `Con m√®o trong ti·∫øng Nh·∫≠t l√† g√¨? (Lv${i + 2})`, answers: ['Neko', 'Inu', 'Tori', 'Kuma'], correct: 'Neko', points: 2 },
          { question: `Xin ch√†o trong ti·∫øng Nh·∫≠t l√† g√¨? (Lv${i + 2})`, answers: ['Konnichiwa', 'Arigatou', 'Sayonara', 'O-neeto'], correct: 'Konnichiwa', points: 2 },
          { question: `S·ªë 1 trong ti·∫øng Nh·∫≠t l√† g√¨? (Lv${i + 2})`, answers: ['Ichi', 'Ni', 'San', 'Yon'], correct: 'Ichi', points: 2 },
          { question: `C·∫£m ∆°n trong ti·∫øng Nh·∫≠t l√† g√¨? (Lv${i + 2})`, answers: ['Arigatou', 'Konnichiwa', 'Sayonara', 'O-neeto'], correct: 'Arigatou', points: 2 },
          { question: `T·∫°m bi·ªát trong ti·∫øng Nh·∫≠t l√† g√¨? (Lv${i + 2})`, answers: ['Sayonara', 'Konnichiwa', 'Arigatou', 'O-neeto'], correct: 'Sayonara', points: 2 }
        ]
      }))
    ];

    // Mock user data
    let userData = {
      nickname: 'Ch∆∞a ƒëƒÉng nh·∫≠p',
      fullName: 'Ch∆∞a c·∫≠p nh·∫≠t',
      className: 'Ch∆∞a c·∫≠p nh·∫≠t',
      level: 1,
      exp: 0
    };

    // Current quiz state
    let currentQuiz = null;
    let userAnswers = [];

    // Initialize
    window.onload = function() {
      const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';
      const profileCompleted = localStorage.getItem('profileCompleted') === 'true';
      updateUI(isLoggedIn, profileCompleted);
      if (isLoggedIn) {
        userData.nickname = localStorage.getItem('nickname') || 'Ng∆∞·ªùi ch∆°i';
        userData.fullName = localStorage.getItem('fullName') || 'Ch∆∞a c·∫≠p nh·∫≠t';
        userData.className = localStorage.getItem('className') || 'Ch∆∞a c·∫≠p nh·∫≠t';
        userData.level = parseInt(localStorage.getItem('level')) || 1;
        userData.exp = parseInt(localStorage.getItem('exp')) || 0;
        updateProfile();
        updateMonsterHistory();
        if (profileCompleted) {
          updateLeaderboard();
          generateMonsterLinks();
        }
      }
      // Enable keyboard navigation
      document.querySelectorAll('button, input').forEach(element => {
        element.addEventListener('keypress', (e) => {
          if (e.key === 'Enter') element.click();
        });
      });
    };

    // Normalize text input for comparison
    function normalizeAnswer(input) {
      return input.trim().replace(/\s+/g, ' ').replace(/[„ÄÇ„ÄÅ]/g, '');
    }

    // Get rank based on level
    function getRank(level) {
      let currentRank = ranks[0];
      for (const rank of ranks) {
        if (level >= rank.minLevel) {
          currentRank = rank;
        } else {
          break;
        }
      }
      return currentRank;
    }

    // Get all users from localStorage
    function getAllUsers() {
      const users = localStorage.getItem('allUsers');
      return users ? JSON.parse(users) : [];
    }

    // Save all users to localStorage
    function saveAllUsers(users) {
      localStorage.setItem('allUsers', JSON.stringify(users));
    }

    // Update UI
    function updateUI(isLoggedIn, profileCompleted) {
      const authSection = document.getElementById('authSection');
      const profileForm = document.getElementById('profileForm');
      const mainTitle = document.getElementById('mainTitle');
      const profileSection = document.getElementById('profileSection');
      const quizSection = document.getElementById('quizSection');
      const leaderboardSection = document.getElementById('leaderboardSection');
      const monsterSection = document.getElementById('monsterSection');

      if (!quizSection) {
        console.error('Quiz section not found');
        return;
      }

      if (isLoggedIn) {
        authSection.classList.add('logged-in');
        if (profileCompleted) {
          profileForm.classList.remove('logged-in');
          mainTitle.classList.add('logged-in');
          profileSection.classList.add('logged-in');
        } else {
          profileForm.classList.add('logged-in');
          mainTitle.classList.remove('logged-in');
          profileSection.classList.remove('logged-in');
          quizSection.classList.remove('logged-in');
          leaderboardSection.classList.remove('active');
          monsterSection.classList.remove('active');
        }
      } else {
        authSection.classList.remove('logged-in');
        profileForm.classList.remove('logged-in');
        mainTitle.classList.remove('logged-in');
        profileSection.classList.remove('logged-in');
        quizSection.classList.remove('logged-in');
        leaderboardSection.classList.remove('active');
        monsterSection.classList.remove('active');
      }
    }

    // Update profile
    function updateProfile() {
      const rank = getRank(userData.level);
      document.getElementById('fullNameDisplay').textContent = userData.fullName;
      document.getElementById('classNameDisplay').textContent = userData.className;
      document.getElementById('rank').textContent = `${rank.name} ${rank.emoji}`;
      document.getElementById('level').textContent = userData.level;
      document.getElementById('exp').textContent = userData.exp;
      const expPercentage = ((userData.exp % 100) / 100) * 100;
      const expBar = document.getElementById('expBar');
      expBar.style.width = `${expPercentage}%`;
      expBar.setAttribute('aria-valuenow', expPercentage);
      const avatar = document.getElementById('avatar');
      avatar.style.background = rank.gradient;
      avatar.textContent = rank.emoji;
    }

    // Update monster history
    function updateMonsterHistory() {
      const history = JSON.parse(localStorage.getItem('monsterHistory') || '[]');
      const historyTableBody = document.querySelector('#monsterHistory tbody');
      historyTableBody.innerHTML = '';
      if (history.length === 0) {
        const row = document.createElement('tr');
        row.innerHTML = '<td colspan="5" style="text-align: center;">Ch∆∞a c√≥ l·ªãch s·ª≠ di·ªát qu√°i.</td>';
        historyTableBody.appendChild(row);
        return;
      }
      history.sort((a, b) => new Date(b.date) - new Date(a.date));
      history.forEach(m => {
        const monster = monsters.find(mon => mon.name === m.name && mon.level === m.level);
        const iconClass = monster ? monster.icon : 'fa-question';
        const exp = monster ? monster.exp : m.exp || 0;
        const row = document.createElement('tr');
        row.innerHTML = `
          <td><i class="fas ${iconClass} monster-icon"></i> ${m.name}</td>
          <td>Lv${m.level}</td>
          <td>
            <div class="score-progress">
              <div class="score-progress-fill" style="width: ${m.score}%"></div>
            </div>
            ${m.score.toFixed(2)}%
          </td>
          <td>+${exp}</td>
          <td>${new Date(m.date).toLocaleString('vi-VN', { dateStyle: 'short', timeStyle: 'short' })}</td>
        `;
        historyTableBody.appendChild(row);
      });
    }

    // Update leaderboard
    function updateLeaderboard() {
      const leaderboardBody = document.getElementById('leaderboard');
      leaderboardBody.innerHTML = '';
      const allUsers = getAllUsers();
      allUsers
        .sort((a, b) => b.exp - a.exp)
        .forEach((player, index) => {
          const rank = getRank(player.level);
          const row = document.createElement('tr');
          row.innerHTML = `
            <td>${index + 1}</td>
            <td>${player.fullName}</td>
            <td>${player.className}</td>
            <td>${rank.name} ${rank.emoji}</td>
            <td>${player.level}</td>
            <td>${player.exp}</td>
          `;
          leaderboardBody.appendChild(row);
        });
    }

    // Generate monster links with EXP
    function generateMonsterLinks() {
      const monsterList = document.getElementById('monsterList');
      monsterList.innerHTML = '';
      monsters.forEach((monster, i) => {
        const link = document.createElement('a');
        link.href = `javascript:startQuiz(${i + 1})`;
        link.className = monster.isBoss ? 'boss' : '';
        link.setAttribute('aria-label', `Di·ªát qu√°i ${monster.name} c·∫•p ${monster.level}`);
        link.innerHTML = `
          <i class="fas ${monster.icon}"></i>
          <span>${monster.name} Lv${monster.level}</span>
          <span class="exp">+${monster.exp} EXP</span>
        `;
        monsterList.appendChild(link);
      });
    }

    // Start quiz
    window.startQuiz = function(level) {
      const quizSection = document.getElementById('quizSection');
      const monsterSection = document.getElementById('monsterSection');
      const leaderboardSection = document.getElementById('leaderboardSection');
      quizSection.classList.add('logged-in');
      monsterSection.classList.remove('active');
      leaderboardSection.classList.remove('active');

      currentQuiz = questions[level - 1];
      userAnswers = new Array(currentQuiz.questions.length).fill(null);
      showAllQuestions();
    };

    // Show all questions (only for Level 1)
    function showAllQuestions() {
      const questionText = document.getElementById('questionText');
      questionText.innerHTML = '';

      if (currentQuiz.level === 1) {
        const sections = [
          { start: 0, end: 4, title: 'ÂïèÈ°å‚Ö†Ôºé„Åü„Å†„Åó„ÅÑ „Åì„Åü„Åà„Çí „Åà„Çâ„Çì„Åß„Åè„Å†„Åï„ÅÑ„ÄÇÔºà2*3=6Ôºâ', vietnamese: 'H√£y ch·ªçn c√¢u tr·∫£ l·ªùi ƒë√∫ng' },
          { start: 4, end: 9, title: 'ÂïèÈ°åIIÔºé„Åü„Å†„Åó„ÅÑ „Çà„Åø„Åã„Åü„Çí „Åà„Çâ„Çì„Åß„Åè„Å†„Åï„ÅÑ„ÄÇÔºà2*5=10Ôºâ', vietnamese: 'H√£y ch·ªçn c√°ch ƒë·ªçc ƒë√∫ng' },
          { start: 9, end: 14, title: 'ÂïèÈ°åIIIÔºéÔºà„ÄÄ„ÄÄÔºâ„Å´ „ÅØ„ÅÑ„Çã „ÅÑ„Å°„Å∞„Çì „Çà„ÅÑ„ÇÇ„ÅÆ„Çí „Åà„Çâ„Çì„Åß„Åè„Å†„Åï„ÅÑ„ÄÇÔºà2*5=10Ôºâ', vietnamese: 'H√£y ch·ªçn ƒë√°p √°n ƒë√∫ng nh·∫•t trong Ôºà„ÄÄÔºâ' },
          { start: 14, end: 17, title: 'ÂïèÈ°åIVÔºéÔºà„ÄÄ„ÄÄÔºâ„Å´ „ÅØ„ÅÑ„Çã „ÅÑ„Å°„Å∞„Çì „Çà„ÅÑ„ÇÇ„ÅÆ„Çí „Åà„Çâ„Çì„Åß„Åè„Å†„Åï„ÅÑ„ÄÇÔºà2*2=4Ôºâ', vietnamese: 'H√£y ch·ªçn ƒë√°p √°n ƒë√∫ng nh·∫•t trong Ôºà„ÄÄÔºâ' },
          { start: 17, end: 22, title: 'ÂïèÈ°åVÔºé„Çå„ÅÑ„ÅÆ„Çà„ÅÜ„Å´„ÄÅ„Åã„ÅÑ„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇÔºà4*4=16Ôºâ', vietnamese: 'H√£y s·∫Øp x·∫øp l·∫°i c√¢u theo nh∆∞ c√¢u v√≠ d·ª•. L∆∞u √Ω: H·ªçc vi√™n vi·∫øt ƒë√∫ng, ƒë·ªß h·∫øt c·∫£ d·∫•u ch·∫•m v√† ph·∫©y, kh√¥ng c√°ch. N·∫øu kh√¥ng s·∫Ω kh√¥ng ƒë∆∞·ª£c t√≠nh ƒëi·ªÉm.' },
          { start: 22, end: 28, title: 'ÂïèÈ°åVIÔºéÔºà„ÄÄ„ÄÄÔºâ„Å´ „ÅØ„ÅÑ„Çã „ÅÑ„Å°„Å∞„Çì „Çà„ÅÑ„ÇÇ„ÅÆ„Çí „Åà„Çâ„Çì„Åß„Åè„Å†„Åï„ÅÑ„ÄÇÔºà3*5=15Ôºâ', vietnamese: 'H√£y ch·ªçn ƒë√°p √°n ƒë√∫ng nh·∫•t cho v√†o trong ( ).', extra: `
            <div style="border: 1px solid #ddd; padding: 15px; border-radius: 5px; margin-bottom: 20px;">
              <p>AÔºö„Åä„ÅØ„Çà„ÅÜ„Åî„Åñ„ÅÑ„Åæ„Åô„ÄÇ</p>
              <p>BÔºö„Åä„ÅØ„Çà„ÅÜ„Åî„Åñ„ÅÑ„Åæ„Åô„ÄÇ</p>
              <p>AÔºöÔºà ÔºìÔºí Ôºâ„ÅØ„Éü„É≥„Åï„Çì„Åß„Åô„Åã„ÄÇ</p>
              <p>BÔºö„ÅØ„ÅÑ„ÄÅ„Çè„Åü„ÅóÔºà ÔºìÔºì Ôºâ„Éü„É≥„Åß„Åô„ÄÇ</p>
              <p>AÔºö„Çè„Åü„Åó„ÅØÂ±±Áî∞„Åß„Åô„ÄÇ„Å©„ÅÜ„Åû„Çà„Çç„Åó„Åè„ÄÇ</p>
              <p>BÔºöÔºà ÔºìÔºî Ôºâ„Çà„Çç„Åó„Åè„Åä„Å≠„Åå„ÅÑ„Åó„Åæ„Åô„ÄÇ</p>
              <p>AÔºö„Éü„É≥„Åï„ÇìÔºà ÔºìÔºï Ôºâ„Éô„Éà„Éä„É†„Åò„Çì„Åß„Åô„Åã„ÄÇ</p>
              <p>BÔºö„ÅØ„ÅÑ„ÄÅ„Éô„Éà„Éä„É†„Åò„Çì„Åß„Åô„ÄÇÂ±±Áî∞„Åï„Çì„ÅØÔºà ÔºìÔºñ Ôºâ„Åß„Åô„Åã„ÄÇ</p>
              <p>AÔºö„Å´„Åª„Çì„Åò„Çì„Åß„Åô„ÄÇ</p>
            </div>
          ` },
          { start: 28, end: 34, title: 'ÂïèÈ°åVIIÔºéX„ÅÆ„Åì„Åü„Åà„Å®„Åó„Å¶ „ÅÑ„Å°„Å∞„Çì „Çà„ÅÑ„ÇÇ„ÅÆ„Çí „Åà„Çâ„Çì„Åß„Åè„Å†„Åï„ÅÑ„ÄÇÔºà3*5=15Ôºâ', vietnamese: 'H√£y ch·ªçn ƒë√°p √°n ƒë√∫ng nh·∫•t ƒë·ªëi v·ªõi c√¢u tr·∫£ l·ªùi c·ªßa X' }
        ];

        sections.forEach(section => {
          const sectionDiv = document.createElement('div');
          sectionDiv.className = 'question-section';
          sectionDiv.innerHTML = `
            <h2>${section.title}</h2>
            <div class="vietnamese">${section.vietnamese}</div>
            ${section.extra || ''}
          `;
          for (let i = section.start; i < section.end; i++) {
            const quiz = currentQuiz.questions[i];
            const questionDiv = document.createElement('div');
            questionDiv.className = quiz.id.includes('rei') ? 'example' : 'question';
            let questionContent = `<p>${quiz.question}</p>`;

            if (quiz.image) {
              questionContent += `
                <div class="image-placeholder">
                  <img src="${quiz.image}" alt="H√¨nh ·∫£nh c√¢u h·ªèi ${quiz.id}" id="image-${quiz.id}">
                </div>
              `;
            }

            if (quiz.type === 'radio') {
              questionContent += '<div class="options">';
              quiz.answers.forEach((answer, index) => {
                questionContent += `
                  <div class="option">
                    <input type="radio" id="${quiz.id}-${index + 1}" name="${quiz.id}" value="${answer}" ${userAnswers[i] === answer ? 'checked' : ''}>
                    <label for="${quiz.id}-${index + 1}">${answer}</label>
                  </div>
                `;
              });
              questionContent += '</div>';
            } else if (quiz.type === 'text') {
              questionContent += `
                <input type="text" id="${quiz.id}" class="text-input" placeholder="Vi·∫øt c√¢u ho√†n ch·ªânh" value="${userAnswers[i] || ''}" aria-label="Nh·∫≠p c√¢u tr·∫£ l·ªùi cho c√¢u ${quiz.id}">
              `;
            }

            questionContent += `<div class="answer-feedback" id="feedback-${quiz.id}"></div>`;
            questionDiv.innerHTML = questionContent;
            sectionDiv.appendChild(questionDiv);
          }
          questionText.appendChild(sectionDiv);
        });

        currentQuiz.questions.forEach((quiz, index) => {
          if (quiz.type === 'radio') {
            quiz.answers.forEach((answer, ansIndex) => {
              const input = document.getElementById(`${quiz.id}-${ansIndex + 1}`);
              if (input) {
                input.addEventListener('change', () => {
                  userAnswers[index] = answer;
                });
              }
            });
          } else if (quiz.type === 'text') {
            const input = document.getElementById(quiz.id);
            if (input) {
              input.addEventListener('input', (e) => {
                userAnswers[index] = e.target.value;
              });
            }
          }
        });
      } else {
        const sectionDiv = document.createElement('div');
        sectionDiv.className = 'question-section';
        const quiz = currentQuiz.questions[0];
        sectionDiv.innerHTML = `
          <h2>B√†i t·∫≠p Level ${currentQuiz.level}</h2>
          <div class="question">${quiz.question}</div>
          <div class="options">
            ${quiz.answers.map((answer, index) => `
              <div class="option">
                <input type="radio" id="${quiz.id}-${index + 1}" name="${quiz.id}" value="${answer}" ${userAnswers[0] === answer ? 'checked' : ''}>
                <label for="${quiz.id}-${index + 1}">${answer}</label>
              </div>
            `).join('')}
          </div>
          <div class="answer-feedback" id="feedback-${quiz.id}"></div>
        `;
        questionText.appendChild(sectionDiv);

        quiz.answers.forEach((answer, index) => {
          document.getElementById(`${quiz.id}-${index + 1}`).addEventListener('change', () => selectAnswer(answer));
        });
      }
    }

    // Select answer (for levels 2-35)
    function selectAnswer(answer) {
      userAnswers[0] = answer;
      const quiz = currentQuiz.questions[0];
      const normalizedAnswer = quiz.type === 'text' ? normalizeAnswer(answer) : answer;
      const normalizedCorrect = quiz.type === 'text' ? normalizeAnswer(quiz.correct) : quiz.correct;
      const feedback = document.getElementById(`feedback-${quiz.id}`);
      feedback.textContent = normalizedAnswer === normalizedCorrect ? 'ƒê√∫ng!' : `Sai! ƒê√°p √°n ƒë√∫ng l√†: ${quiz.correct}`;
      feedback.style.color = normalizedAnswer === normalizedCorrect ? '#28a745' : '#d6336c';

      setTimeout(() => {
        if (currentQuiz.questions.length > 1) {
          currentQuiz.questions.shift();
          showAllQuestions();
        } else {
          submitQuiz();
        }
      }, 1000);
    }

    // Submit quiz
    window.submitQuiz = function() {
      let totalPoints = 0;
      let userPoints = 0;
      currentQuiz.questions.forEach((q, i) => {
        totalPoints += q.points;
        const normalizedAnswer = q.type === 'text' ? normalizeAnswer(userAnswers[i] || '') : userAnswers[i];
        const normalizedCorrect = q.type === 'text' ? normalizeAnswer(q.correct) : q.correct;
        if (normalizedAnswer === normalizedCorrect) {
          userPoints += q.points;
        }
        if (currentQuiz.level === 1) {
          const feedback = document.getElementById(`feedback-${q.id}`);
          if (feedback) {
            feedback.textContent = normalizedAnswer === normalizedCorrect ? 'ƒê√∫ng!' : `Sai! ƒê√°p √°n ƒë√∫ng l√†: ${q.correct}`;
            feedback.style.color = normalizedAnswer === normalizedCorrect ? '#28a745' : '#d6336c';
          }
        }
      });
      const score = (userPoints / totalPoints) * 100;
      const monster = monsters[currentQuiz.level - 1];
      if (score >= 85) {
        userData.exp += currentQuiz.exp;
        userData.level = Math.floor(userData.exp / 100) + 1;
        localStorage.setItem('level', userData.level);
        localStorage.setItem('exp', userData.exp);
        const history = JSON.parse(localStorage.getItem('monsterHistory') || '[]');
        history.push({
          name: monster.name,
          level: currentQuiz.level,
          score: score.toFixed(2),
          date: new Date().toLocaleString()
        });
        localStorage.setItem('monsterHistory', JSON.stringify(history));
        showExpNotification(true, score, currentQuiz.exp, monster);
        updateProfile();
        updateUserInAllUsers();
        updateLeaderboard();
        updateMonsterHistory();
      } else {
        showExpNotification(false, score, currentQuiz.exp, monster);
      }
    };

    // Show EXP Notification
    function showExpNotification(success, score, exp, monster) {
      const expNotification = document.getElementById('expNotification');
      const expIcon = document.getElementById('expIcon');
      const expMessage = document.getElementById('expMessage');
      const expMonster = document.getElementById('expMonster');
      const expScore = document.getElementById('expScore');
      const expAmountContainer = document.getElementById('expAmountContainer');
      const expAmount = document.getElementById('expAmount');
      const expButtons = document.getElementById('expButtons');

      expIcon.textContent = success ? '‚úÖ' : '‚ùå';
      expMessage.textContent = success 
        ? `Ch√∫c m·ª´ng! B·∫°n ƒë√£ ti√™u di·ªát th√†nh c√¥ng ${monster.name}!`
        : `Th·∫•t b·∫°i! B·∫°n ch∆∞a th·ªÉ ti√™u di·ªát ${monster.name}. C·∫ßn ƒë·∫°t 85% tr·ªü l√™n.`;
      expMonster.textContent = `${monster.name} Lv${monster.level}`;
      expScore.textContent = `${score.toFixed(2)}%`;
      if (success) {
        expAmountContainer.style.display = 'block';
        expAmount.textContent = `+${exp} EXP`;
      } else {
        expAmountContainer.style.display = 'none';
      }

      expButtons.innerHTML = '';
      if (success) {
        const continueButton = document.createElement('button');
        continueButton.textContent = 'Ti·∫øp t·ª•c';
        continueButton.setAttribute('aria-label', 'Quay l·∫°i danh s√°ch qu√°i v·∫≠t');
        continueButton.onclick = () => {
          expNotification.classList.remove('active');
          showMonsterSection();
        };
        expButtons.appendChild(continueButton);
      } else {
        const retryButton = document.createElement('button');
        retryButton.textContent = 'Th·ª≠ l·∫°i';
        retryButton.className = 'retry-button';
        retryButton.setAttribute('aria-label', 'Th·ª≠ l·∫°i b√†i ki·ªÉm tra');
        retryButton.onclick = () => {
          userAnswers = new Array(currentQuiz.questions.length).fill(null);
          expNotification.classList.remove('active');
          showAllQuestions();
        };
        const backButton = document.createElement('button');
        backButton.textContent = 'Quay l·∫°i';
        backButton.setAttribute('aria-label', 'Quay l·∫°i danh s√°ch qu√°i v·∫≠t');
        backButton.onclick = () => {
          expNotification.classList.remove('active');
          showMonsterSection();
        };
        expButtons.appendChild(retryButton);
        expButtons.appendChild(backButton);
      }

      expNotification.classList.add('active');
    }

    // Update or add user in allUsers
    function updateUserInAllUsers() {
      const allUsers = getAllUsers();
      const existingUserIndex = allUsers.findIndex(user => user.nickname === userData.nickname);
      const rank = getRank(userData.level);
      const userEntry = {
        nickname: userData.nickname,
        fullName: userData.fullName,
        className: userData.className,
        level: userData.level,
        exp: userData.exp,
        rank: rank.name
      };
      if (existingUserIndex >= 0) {
        allUsers[existingUserIndex] = userEntry;
      } else {
        allUsers.push(userEntry);
      }
      saveAllUsers(allUsers);
    }

    // Submit profile
    window.submitProfile = function() {
      const fullName = document.getElementById('fullName').value;
      const className = document.getElementById('className').value;
      const nameRegex = /^[a-zA-Z\s√Ä-·ªπ]+$/;
      if (!nameRegex.test(fullName)) {
        alert('H·ªç v√† T√™n ch·ªâ ƒë∆∞·ª£c ch·ª©a ch·ªØ c√°i v√† kho·∫£ng tr·∫Øng!');
        return;
      }
      if (fullName && className) {
        userData.fullName = fullName;
        userData.className = className;
        localStorage.setItem('fullName', fullName);
        localStorage.setItem('className', className);
        localStorage.setItem('profileCompleted', 'true');
        updateUserInAllUsers();
        updateUI(true, true);
        updateProfile();
        updateLeaderboard();
        updateMonsterHistory();
        generateMonsterLinks();
        alert('C·∫≠p nh·∫≠t th√¥ng tin th√†nh c√¥ng!');
      } else {
        alert('Vui l√≤ng nh·∫≠p ƒë·∫ßy ƒë·ªß H·ªç v√† T√™n v√† L·ªõp h·ªçc!');
      }
    };

    // Login
    window.login = function() {
      const email = document.getElementById('email').value;
      const password = document.getElementById('password').value;
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if (!emailRegex.test(email)) {
        alert('Vui l√≤ng nh·∫≠p email h·ª£p l·ªá!');
        return;
      }
      if (email && password) {
        localStorage.setItem('isLoggedIn', 'true');
        localStorage.setItem('nickname', email.split('@')[0]);
        userData.nickname = email.split('@')[0];
        userData.level = 1;
        localStorage.setItem('level', userData.level);
        const allUsers = getAllUsers();
        const existingUser = allUsers.find(user => user.nickname === userData.nickname);
        if (existingUser) {
          userData.fullName = existingUser.fullName;
          userData.className = existingUser.className;
          userData.level = existingUser.level;
          userData.exp = existingUser.exp;
          localStorage.setItem('fullName', userData.fullName);
          localStorage.setItem('className', userData.className);
          localStorage.setItem('level', userData.level);
          localStorage.setItem('exp', userData.exp);
          localStorage.setItem('profileCompleted', 'true');
          updateUI(true, true);
          updateProfile();
          updateLeaderboard();
          updateMonsterHistory();
          generateMonsterLinks();
        } else {
          updateUI(true, false);
        }
        updateProfile();
        alert('ƒêƒÉng nh·∫≠p th√†nh c√¥ng!');
      } else {
        alert('Vui l√≤ng nh·∫≠p email v√† m·∫≠t kh·∫©u!');
      }
    };

    // Register
    window.register = function() {
      const email = document.getElementById('email').value;
      const password = document.getElementById('password').value;
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if (!emailRegex.test(email)) {
        alert('Vui l√≤ng nh·∫≠p email h·ª£p l·ªá!');
        return;
      }
      if (email && password) {
        const allUsers = getAllUsers();
        const existingUser = allUsers.find(user => user.nickname === email.split('@')[0]);
        if (existingUser) {
          alert('Email ƒë√£ ƒë∆∞·ª£c ƒëƒÉng k√Ω! Vui l√≤ng ƒëƒÉng nh·∫≠p ho·∫∑c s·ª≠ d·ª•ng email kh√°c.');
          return;
        }
        localStorage.setItem('isLoggedIn', 'true');
        localStorage.setItem('nickname', email.split('@')[0]);
        userData.nickname = email.split('@')[0];
        userData.level = 1;
        localStorage.setItem('level', userData.level);
        updateUI(true, false);
        updateProfile();
        alert('ƒêƒÉng k√Ω th√†nh c√¥ng!');
      } else {
        alert('Vui l√≤ng nh·∫≠p email v√† m·∫≠t kh·∫©u!');
      }
    };

    // Logout
    window.logout = function() {
      localStorage.removeItem('isLoggedIn');
      localStorage.removeItem('nickname');
      localStorage.removeItem('level');
      localStorage.removeItem('exp');
      localStorage.removeItem('profileCompleted');
      userData = { 
        nickname: 'Ch∆∞a ƒëƒÉng nh·∫≠p', 
        fullName: userData.fullName, 
        className: userData.className, 
        level: 1, 
        exp: 0 
      };
      updateUI(false, false);
      updateProfile();
      alert('ƒêƒÉng xu·∫•t th√†nh c√¥ng!');
    };

    // Show monster section
    window.showMonsterSection = function() {
      const monsterSection = document.getElementById('monsterSection');
      const leaderboardSection = document.getElementById('leaderboardSection');
      const quizSection = document.getElementById('quizSection');
      monsterSection.classList.add('active');
      leaderboardSection.classList.remove('active');
      quizSection.classList.remove('logged-in');
      generateMonsterLinks();
    };

    // Show leaderboard
    window.showLeaderboard = function() {
      const monsterSection = document.getElementById('monsterSection');
      const leaderboardSection = document.getElementById('leaderboardSection');
      const quizSection = document.getElementById('quizSection');
      leaderboardSection.classList.add('active');
      monsterSection.classList.remove('active');
      quizSection.classList.remove('logged-in');
      updateLeaderboard();
    };
  </script>
</body>
</html>
